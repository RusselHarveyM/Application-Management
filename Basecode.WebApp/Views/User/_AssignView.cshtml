@using Basecode.Data.ViewModels
@model AssignViewModel
    

<!-- Modal -->
<div class="modal fade" id="assignUserModal" tabindex="-1" aria-labelledby="assignUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header mx-4 border-bottom border-2">
                <h1 class="modal-title fs-3" id="assignUserModalLabel">Assign User</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form asp-action="Assign" id="assignUserForm">
                <input type="hidden" asp-for="UserId" value="@Model.UserId" />
                <input type="hidden" name="jobOpeningId" id="jobOpeningId" />
                @if (Model.JobOpenings != null && Model.JobOpenings.Count > 0)
                {
                    <div class="modal-body px-5 py-4">
                        <div class="row">
                            <div class="col">
                                @if (Model.JobOpenings.Count > 0)
                                {
                                    <select id="jobOpenings" class="form-select">
                                        @foreach (var jobOpening in Model.JobOpenings)
                                        {
                                            <option value="@jobOpening.Id">@jobOpening.Title</option>
                                        }
                                    </select>
                                }
                                else
                                {
                                    <p>No job openings available.</p>
                                }
                            </div>
                            <div class="col">
                                <button type="submit" class="btn btn-submit"><i class="fa-solid fa-floppy-disk"></i> ASSIGN USER</button>
                            </div>
                        </div>
                    </div>
                }
            </form>
        </div>
    </div>
</div>

<script src="~/js/user/user.js"></script>
<script>
    document.getElementById('assignUserForm').addEventListener('submit', function (event) {
        var selectedJobOpeningId = document.getElementById('jobOpenings').value;
        var hiddenInput = document.getElementById('jobOpeningId');
        hiddenInput.value = selectedJobOpeningId;
    });
</script>